name: CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
    types: [ closed, opened, synchronize, reopened ]
  issue_comment:
    types: [created]
    if: contains(github.event.comment.body, 'digger')
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
#      - uses: actions/checkout@v3
#        with:
#          ref: refs/pull/${{ github.event.issue.number }}/merge
#        if: github.event_name == 'issue_comment'
#      - uses: actions/checkout@v3
#        if: github.event_name != 'issue_comment'
#
#      - name: Configure Test AWS credentials
#        uses: aws-actions/configure-aws-credentials@v1
#        with:
#          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
#          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
#          aws-region: us-east-1
#
#      - name: digger tfrun
#        uses: diggerhq/digger@feat/set-statuses
#        env:
#          GITHUB_CONTEXT: ${{ toJson(github) }}
#          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - name: print ACTIONS_CACHE_URL
        env:
          ACTIONS_CACHE_URL: ${{ env.ACTIONS_CACHE_URL }}
          ACTIONS_RUNTIME_TOKEN: ${{ env.ACTIONS_RUNTIME_TOKEN }}
        run: |
          echo $ACTIONS_CACHE_URL
          echo $ACTIONS_RUNTIME_TOKEN
